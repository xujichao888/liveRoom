{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/admin/Desktop/liveRoomByNative/pages/index/index.nvue?d022","webpack:///C:/Users/admin/Desktop/liveRoomByNative/pages/index/index.nvue?e9d5","webpack:///C:/Users/admin/Desktop/liveRoomByNative/pages/index/index.nvue?f677","uni-app:///pages/index/index.nvue","webpack:///C:/Users/admin/Desktop/liveRoomByNative/pages/index/index.nvue?e5a0","webpack:///C:/Users/admin/Desktop/liveRoomByNative/pages/index/index.nvue?a3bd","webpack:///C:/Users/admin/Desktop/liveRoomByNative/pages/index/index.nvue?7730","webpack:///C:/Users/admin/Desktop/liveRoomByNative/pages/index/index.nvue?631d"],"names":["createPage","Page"],"mappings":";;;;;;;;;;;;;;;;;;;;;;kDAAA;AACA;AACA,6F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACa;AACC;;;AAGnE;AACgK;AAChK,gBAAgB,6KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kMAEN;AACP,KAAK;AACL;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,aAAa,0MAEN;AACP,KAAK;AACL;AACA,aAAa,wMAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,gNAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,aAAa,6NAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzEA;AAAA;AAAA;AAAA;AAAolB,CAAgB,gnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsGxmB;;;AAGA;;;;AAIA,mF;;;;;;;;;;;;;;;AAeA;AACA,MADA,kBACA;AACA;AACA,yBADA,EACA;AACA,oBAFA;AAGA;AACA;AACA,eADA;AAEA,eAFA;AAGA,eAHA;AAIA,eAJA;AAKA,gBALA;AAMA,gBANA;AAOA,gBAPA;AAQA,iBARA,EAJA;;AAcA,oBAdA,EAcA;AACA;AACA,kBADA;AAEA,kBAFA;AAGA,sBAHA;AAIA,kBAJA,EAfA;;AAqBA,wBArBA,EAqBA;AACA,mBAtBA,EAsBA;AACA,qBAvBA,CAuBA;AAvBA;AAyBA,GA3BA;AA4BA,SA5BA,qBA4BA;AACA;AACA;AACA,aADA,mBACA,GADA,EACA;;AAEA,oBAFA;AAGA,WAHA,CAEA,YAFA;AAIA;AACA,OANA;;AAQA,GAtCA;AAuCA;AACA,cADA,wBACA;AACA;AACA,KAHA,EAvCA;;AA4CA,QA5CA,oBA4CA;AACA;AACA;AACA;AACA,GAhDA;AAiDA;AACA,cADA,sBACA,MADA,EACA;AACA;AACA;AACA;AACA;AACA,oBADA;AAEA,oCAFA;;AAIA,KATA;AAUA,gBAVA,0BAUA;AACA,oBADA,GACA,KADA;AAEA;AACA;AACA,8BADA,IAHA;;AAMA,2FANA,SAMA,MANA;AAOA;AACA,oCARA;;AAUA,iEAVA;;AAYA,KAtBA;AAuBA,gBAvBA,0BAuBA;AACA;AACA;AACA,yBADA,CADA,SACA,MADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA,kFAtBA,CAsBA;AACA,oEAvBA,CAuBA;AACA;AACA,mBAzBA,MAyBA;AACA;AACA,mBA9BA;;AAgCA,KAxDA;AAyDA,WAzDA,qBAyDA;AACA;AACA,uJADA,SACA,MADA;AAEA;AACA;AACA;AACA,mBAFA,MAEA;AACA;AACA,mBAPA;;;AAUA,KApEA;AAqEA,eArEA,yBAqEA;AACA;AACA,4JADA,SACA,MADA;AAEA;AACA,kFADA,CACA;AACA;AACA,sBAHA,GAGA,8BAHA;AAIA,gFAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA,mBAVA,MAUA;AACA;AACA,mBAdA;;AAgBA,KAtFA;AAuFA,yBAvFA,mCAuFA;AACA,wMADA,SACA,MADA;AAEA;AACA;AACA;AACA;AACA,mBAFA;AAGA;AACA,iBARA;;AAUA,KAjGA;AAkGA,gBAlGA,0BAkGA;AACA,oBADA,GACA,MADA;AAEA,kCAFA;AAGA,oCAHA;;AAKA,kLALA,SAKA,MALA;AAMA;AACA;AACA,iBARA;;AAUA;AACA;AAXA,2CAYA,kKAZA,SAYA,OAZA;AAaA;AACA;AACA,iBAfA;;AAiBA,KAnHA;AAoHA,SApHA,mBAoHA;AACA;AACA;AACA,+EAHA;AAIA,sNAJA,SAIA,MAJA;AAKA;AACA;AACA,iBAPA;AAQA,KA5HA;AA6HA;AACA,mBA9HA,6BA8HA;AACA;AACA,KAhIA;AAiIA,eAjIA,yBAiIA;AACA,mCADA,CACA;AACA;AACA,KApIA;AAqIA,eArIA,yBAqIA;AACA;AACA;AACA,KAxIA;AAyIA,aAzIA,uBAyIA;AACA;AACA,KA3IA;AA4IA,gBA5IA,0BA4IA;AACA;AACA,KA9IA,EAjDA,E;;;;;;;;;;;;;;;;;;AC5HA;AAAA;AAAA;AAAA;AAAi2B,CAAgB,q2BAAG,EAAC,C;;;;;;;;;;ACAr3B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAA6kC,CAAgB,0jCAAG,EAAC,C;;;;;;;;;;ACAjmC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.nvue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.nvue?vue&type=template&id=8ddf7c9c&\"\nvar renderjs\nimport script from \"./index.nvue?vue&type=script&lang=js&\"\nexport * from \"./index.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./index.nvue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./index.nvue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.nvue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=template&id=8ddf7c9c&\"","var components\ntry {\n  components = {\n    dText: function() {\n      return import(\n        /* webpackChunkName: \"dnvue-ui/components/d-text/d-text\" */ \"@/dnvue-ui/components/d-text/d-text\"\n      )\n    },\n    xuFirstRowBtn: function() {\n      return import(\n        /* webpackChunkName: \"components/xu-firstRowBtn/xu-firstRowBtn\" */ \"@/components/xu-firstRowBtn/xu-firstRowBtn.nvue\"\n      )\n    },\n    xuRoomseat: function() {\n      return import(\n        /* webpackChunkName: \"components/xu-roomseat/xu-roomseat\" */ \"@/components/xu-roomseat/xu-roomseat.nvue\"\n      )\n    },\n    dPopup: function() {\n      return import(\n        /* webpackChunkName: \"dnvue-ui/components/d-popup/d-popup\" */ \"@/dnvue-ui/components/d-popup/d-popup\"\n      )\n    },\n    xuPopuptitle: function() {\n      return import(\n        /* webpackChunkName: \"components/xu-popuptitle/xu-popuptitle\" */ \"@/components/xu-popuptitle/xu-popuptitle.nvue\"\n      )\n    },\n    xuPublicMsg: function() {\n      return import(\n        /* webpackChunkName: \"components/xu-publicMsg/xu-publicMsg\" */ \"@/components/xu-publicMsg/xu-publicMsg.nvue\"\n      )\n    },\n    xuOnlineList: function() {\n      return import(\n        /* webpackChunkName: \"components/xu-onlineList/xu-onlineList\" */ \"@/components/xu-onlineList/xu-onlineList.nvue\"\n      )\n    },\n    xuMoreContent: function() {\n      return import(\n        /* webpackChunkName: \"components/xu-moreContent/xu-moreContent\" */ \"@/components/xu-moreContent/xu-moreContent.nvue\"\n      )\n    },\n    xuSortContent: function() {\n      return import(\n        /* webpackChunkName: \"components/xu-sortContent/xu-sortContent\" */ \"@/components/xu-sortContent/xu-sortContent.nvue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=script&lang=js&\"","<style>\n  view,\n  swiper-item,\n  scroll-view {\n    display:flex;\n    flex-direction:column;\n    flex-shrink: 0;\n    flex-grow: 0;\n    flex-basis: auto;\n    align-items: stretch;\n    align-content: flex-start;\n  }\n  view,\n  image,\n  input,\n  scroll-view,\n  swiper,\n  swiper-item,\n  text,\n  textarea,\n  video {\n    position: relative;\n    border: 0px solid #000000;\n    box-sizing: border-box;\n  }\n  swiper-item {\n    position: absolute;\n  }\n</style>\n<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 背景 -->\r\n\t\t<image :style=\"{width:'750rpx',height:imageHeight+'px'}\" class=\"bg-img\" src=\"https://beartests.oss-cn-beijing.aliyuncs.com/liveTest/sa6ds1a6.jpg\"\r\n\t\t mode=\"aspectFill\"></image>\r\n\t\t<!-- 最上方的一行  -->\r\n\t\t<view class=\"first-row-container\">\r\n\t\t\t<view class=\"first-row-left\">\r\n\t\t\t\t<image class=\"return-pre-page\" src=\"/static/icon/fanhui-white@3x.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t<view class=\"room-msg\" @click.stop=\"popupOnline\">\r\n\t\t\t\t\t<text class=\"room-name\">{{roomInfo.name}}</text>\r\n\t\t\t\t\t<view class=\"roomid-onlineNum\">\r\n\t\t\t\t\t\t<d-text :text=\"'ID'+roomInfo.id\" size=\"20rpx\" color-custom=\"#999999\" :margin=\"[0,10,0,0]\"></d-text>\r\n\t\t\t\t\t\t<d-text :text=\"'在线'+roomInfo.usercount+'人'\" size=\"20rpx\" color-custom=\"#999999\"></d-text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"first-row-right\">\r\n\t\t\t\t<xu-firstRowBtn text=\"公告\" :hasIcon=\"false\" @click.native=\"popupPubliceMsg\"/>\r\n\t\t\t\t<xu-firstRowBtn :text=\"isListText\" :hasIcon=\"!likeControl\" :isActive=\"likeControl\" @click.native=\"lickThisRoom\" />\r\n\t\t\t\t<view class=\"first-row-more-box\" @click=\"popupMore\">\r\n\t\t\t\t\t<image class=\"first-row-right-more\" src=\"/static/icon/more.png\" mode=\"widthFix\" ></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 房主和排行榜 -->\r\n\t\t<view class=\"master\" >\r\n\t\t\t<view class=\"sort-btn\" @click=\"sortPopupFun\">\r\n\t\t\t\t<text class=\"sort-btn-text\">排行榜</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 房主的座位 -->\r\n\t\t\t<xu-roomseat :isMaster=\"true\" :renderJson=\"masterSeat\"/>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<!-- 其他上麦的座位 -->\r\n\t\t<view class=\"seat-box\">\r\n\t\t\t<view class=\"seat-box-block\" v-for=\"(val,key,i) in micSeatJson\" :key=\"key\">\r\n\t\t\t\t<xu-roomseat  :renderJson=\"val\"/>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 公告弹出 -->\r\n\t\t<d-popup direction=\"bottom\" ref=\"publicMsgPop\">\r\n\t\t\t<view>\r\n\t\t\t\t<xu-popuptitle text=\"公告\"/>\r\n\t\t\t\t<xu-publicMsg :text=\"roomInfo.notice\"/>\r\n\t\t\t</view>\r\n\t\t</d-popup>\r\n\t\t<!-- 在线列表弹出 -->\r\n\t\t<d-popup direction=\"bottom\" ref=\"onlinePersonPopup\" @closeFun=\"closeOnline\">\r\n\t\t\t<view>\r\n\t\t\t\t<xu-popuptitle text=\"在线列表\"/>\r\n\t\t\t\t<xu-onlineList :onlineArr=\"onlineArr\" :onlineOffset=\"onlineOffset\" @loadMoreOnline=\"getOnlineListByWebAPI\" />\r\n\t\t\t</view>\r\n\t\t</d-popup>\r\n\t\t<!-- 三个点的弹出 -->\r\n\t\t<d-popup direction=\"bottom\" ref=\"morePopup\">\r\n\t\t\t<view>\r\n\t\t\t\t<xu-popuptitle text=\"设置\" position=\"left\"/>\r\n\t\t\t\t<xu-moreContent  />\r\n\t\t\t</view>\r\n\t\t</d-popup>\r\n\t\t<!-- 排行榜的弹出 -->\r\n\t\t<d-popup direction=\"bottom\" ref=\"sortPopup\">\r\n\t\t\t<view>\r\n\t\t\t\t<xu-sortContent :roomid=\"roomInfo.id\"/>\r\n\t\t\t</view>\r\n\t\t</d-popup>\r\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t\r\n\timport {\r\n\t\tReqWebApi\r\n\t} from '@/static/publicJs/requestFun.js';\r\n\timport {\r\n\t\tgetToken,\r\n\t\trefreshToken\r\n\t} from '@/static/publicJs/token.js';\r\n\timport {\r\n\t\tgetRoomMsg,\r\n\t\taddcollictionPath,\r\n\t\tremoveCollectionPath,\r\n\t\tgetOnlineList,\r\n\t\tgetRTCtoken,\r\n\t\tupMicPath,\r\n\t\tdownMicPath,\r\n\t\tgetRTMtoken,\r\n\t\tgetUserMsgPath,\r\n\t\tupdataRoomInfo,\r\n\t\tprohibitUserMic,\r\n\t\tgetSortMsg,\r\n\t\taddRoom\r\n\t} from '@/static/publicJs/requestPath.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisMasterCome:false,//判断进来的是不是房主\r\n\t\t\t\tmasterSeat:{\r\n\t\t\t\t},//房主的座位\r\n\t\t\t\tmicSeatJson:{ //底部座位\r\n\t\t\t\t\t\"1\":{},\r\n\t\t\t\t\t\"2\":{},\r\n\t\t\t\t\t\"4\":{},\r\n\t\t\t\t\t\"8\":{},\r\n\t\t\t\t\t\"16\":{},\r\n\t\t\t\t\t\"32\":{},\r\n\t\t\t\t\t\"64\":{},\r\n\t\t\t\t\t\"128\":{}\r\n\t\t\t\t},\r\n\t\t\t\timageHeight: 0, //屏幕的高度\r\n\t\t\t\troomInfo: { //房间的具体信息，\r\n\t\t\t\t\tname: '默认',\r\n\t\t\t\t\tid: '0001',\r\n\t\t\t\t\tusercount: '0',\r\n\t\t\t\t\tnotice:''\r\n\t\t\t\t},\r\n\t\t\t\tlikeControl: false, //是否收藏了房间\r\n\t\t\t\tonlineArr:[],//在线人数渲染列表\r\n\t\t\t\tonlineOffset:0//分页渲染\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tlet that = this\r\n\t\t\tuni.getSystemInfo({ //获得屏幕的高度\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tscreenHeight\r\n\t\t\t\t\t} = res;\r\n\t\t\t\t\tthat.imageHeight = screenHeight\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tisListText() {\r\n\t\t\t\treturn this.likeControl ? '已收藏' : '收藏'\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tlet option = \"9c5a7857371e70b2867d7bc75a2e48faffe21b203c58cab5be7c39ae55d4c93040\";\r\n\t\t\tthis.initOutMsg(option);\r\n\t\t\tthis.onloadPromis()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinitOutMsg(option) { //初始化外部传入数据\r\n\t\t\t\tthis.RoomId = option.slice(64)\r\n\t\t\t\tlet token = option.slice(0, 32)\r\n\t\t\t\tlet refresh_token = option.slice(32, 64)\r\n\t\t\t\tthis.$store.state.userTokenMsg = {\r\n\t\t\t\t\ttoken,\r\n\t\t\t\t\trefresh_token\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync onloadPromis() { //加载多条初始化信息\r\n\t\t\t\tlet that = this\r\n\t\t\t\ttry { //this.getUserInfo(), this.getRTCtoken(), this.getRTMToken(),this.getSortBestPerson()\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tlet result = await Promise.all([this.loadRoomInfo(),this.addRoom(),this.getUserInfo()])\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tconsole.log(result)\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tawait refreshToken(this, 'onloadPromis')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tloadRoomInfo() { //获得房间详细资料\r\n\t\t\t\treturn new Promise(async (resolve, reject) => {\r\n\t\t\t\t\tlet result = await ReqWebApi(getRoomMsg + this.RoomId, 'GET', '', getToken(this), this, 'loadRoomInfo', '',\r\n\t\t\t\t\t\tfalse);\r\n\t\t\t\t\tif (result.data.code == 0) {\r\n\t\t\t\t\t\tthis.roomInfo = result.data.data\r\n\t\t\t\t\t\tif (this.roomInfo.iscollect) { //判断用户是否收藏房间\r\n\t\t\t\t\t\t\tthis.likeControl = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log('房间信息', this.roomInfo)\r\n\t\t\t\t\t\tif(this.roomInfo.anchor){ //进入房间初始化已经在麦上的数据后续的是靠IM实现的渲染\r\n\t\t\t\t\t\t\tfor(let key in this.roomInfo.anchor){\r\n\t\t\t\t\t\t\t\tif(key==0){//key等于0 说明房主在麦上\r\n\t\t\t\t\t\t\t\t\tthis.masterSeat = JSON.parse(this.roomInfo.anchor[key])\r\n\t\t\t\t\t\t\t\t\tthis.masterSeat.micState = 1\r\n\t\t\t\t\t\t\t\t}else{//一堆麦的数据\r\n\t\t\t\t\t\t\t\t\tthis.$set(this.micSeatJson,key,this.roomInfo.anchor[key])\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log(this.masterSeat)\r\n\t\t\t\t\t\t\tconsole.log(this.micSeatJson)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.$store.state.roomOnlineNum = this.roomInfo.usercount; //读取房间的在线人数\r\n\t\t\t\t\t\tthis.$store.state.seat = this.roomInfo.seat; //获得房间的锁座位情况\r\n\t\t\t\t\t\tresolve(1)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(-1)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddRoom(){ //加入房间的验证\r\n\t\t\t\treturn new Promise(async(resolve,reject)=>{\r\n\t\t\t\t\tlet result = await ReqWebApi(addRoom+this.RoomId,'PUT',{},getToken(this),this,'addRoom',false);\r\n\t\t\t\t\tconsole.log('加入房间是否成功',result)\r\n\t\t\t\t\tif(result.data.code == 0){\r\n\t\t\t\t\t\tresolve(1)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treject(-1)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tgetUserInfo(){ //获得用户的详细信息\r\n\t\t\t\treturn new Promise(async (resolve,reject)=>{\r\n\t\t\t\t\tlet result = await ReqWebApi(getUserMsgPath+'0','GET',{},getToken(this),this,'getUserInfo','',false);\r\n\t\t\t\t\tif(result.data.code == 0){\r\n\t\t\t\t\t\tthis.$set(this.$store.state,'userMsg',result.data.data); //客户端用户的信息\r\n\t\t\t\t\t\tconsole.log('用户信息',this.$store.state.userMsg)\r\n\t\t\t\t\t\tlet id = this.$store.state.userMsg.id\r\n\t\t\t\t\t\tthis.$set(this.$store.state.userTokenMsg,'userid',id);//保存用的id\r\n\t\t\t\t\t\tthis.isMasterCome = result.data.data.id == this.roomInfo.master?true:false;\r\n\t\t\t\t\t\tif(this.isMasterCome){ //房主直接上麦\r\n\t\t\t\t\t\t\tthis.upMic()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresolve(1)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treject(-1)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\t\r\n\t\t\t},\r\n\t\t\tasync getOnlineListByWebAPI() { //拉取在线人数列表\r\n\t\t\t\tlet result = await ReqWebApi(getOnlineList + this.RoomId + '/' + this.onlineOffset, 'GET', '',  getToken(this),this,'getOnlineListByWebAPI','',true);\r\n\t\t\t\tif (result.data.code == 0) {\r\n\t\t\t\t\tthis.onlineOffset = result.data.data.cursor\r\n\t\t\t\t\tresult.data.data.data.forEach(item => {\r\n\t\t\t\t\t\tthis.onlineArr.push(JSON.parse(item))\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.log(result.data.data.data.length)\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\tasync lickThisRoom() { //收藏和取消收藏\r\n\t\t\t\tlet that = this\r\n\t\t\t\tif (this.likeControl) {\r\n\t\t\t\t\tconsole.log('取消收藏')\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet result = await ReqWebApi(removeCollectionPath+this.roomInfo.id,'DELETE','', getToken(this),this,'lickThisRoom','',true)\r\n\t\t\t\t\tif (result.data.code == 0) {\r\n\t\t\t\t\t\tthis.likeControl = !this.likeControl\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('添加收藏')\r\n\t\t\t\t\t//请求收藏接口url,methods,data,token\r\n\t\t\t\t\tlet result = await ReqWebApi(addcollictionPath,'POST',{roomid: this.roomInfo.id},getToken(this),this,'lickThisRoom','',true)\r\n\t\t\t\t\tif (result.data.code == 0) {\r\n\t\t\t\t\t\tthis.likeControl = !this.likeControl\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync upMic(){//申请上麦\r\n\t\t\t\tconsole.log('path',upMicPath)\r\n\t\t\t\tconsole.log('roomd',this.RoomId)\r\n\t\t\t\tconsole.log('userid',this.$store.state.userTokenMsg.userid)\r\n\t\t\t\tlet result = await ReqWebApi(upMicPath,'POST',{roomid: this.roomInfo.id,userid:this.$store.state.userTokenMsg.userid},getToken(this),this,'upMic','',true)\r\n\t\t\t\tif (result.data.code == 0) {\r\n\t\t\t\t\t//这个地方走IM 在麦上通知更新视图\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//弹出的所有方法 \r\n\t\t\tpopupPubliceMsg(){ //公告弹出控制\r\n\t\t\t\tthis.$refs.publicMsgPop.open()\r\n\t\t\t},\r\n\t\t\tpopupOnline(){//打开在线列表\r\n\t\t\t\tthis.getOnlineListByWebAPI() //数据不对\r\n\t\t\t\tthis.$refs.onlinePersonPopup.open()\r\n\t\t\t},\r\n\t\t\tcloseOnline(){ //关闭在线列表的回调\r\n\t\t\t\tthis.onlineArr=[];\r\n\t\t\t\tthis.onlineOffset = 0\r\n\t\t\t},\r\n\t\t\tpopupMore(){ //控制三个点弹出\r\n\t\t\t\tthis.$refs.morePopup.open()\r\n\t\t\t},\r\n\t\t\tsortPopupFun(){//排行榜弹出\r\n\t\t\t\tthis.$refs.sortPopup.open()\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.container {}\r\n\r\n\t.bg-img {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t}\r\n\r\n\t.first-row-container {\r\n\t\twidth: 750rpx;\r\n\t\theight: 200rpx;\r\n\t\tpadding: 30rpx 0;\r\n\t\tposition: fixed;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.first-row-left {\r\n\t\twidth: 250rpx;\r\n\t\theight: 100rpx;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.return-pre-page {\r\n\t\twidth: 20rpx;\r\n\t\tmargin-left: 24rpx;\r\n\t\tmargin-right: 23rpx;\r\n\t}\r\n\r\n\t.room-msg {\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.roomid-onlineNum {\r\n\t\tflex-direction: row;\r\n\t}\r\n\t.room-name {\r\n\t\twidth: 130rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #FFFFED;\r\n\t\tlines: 1;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\t/* #ifndef APP-PLUS */\r\n\t\twhite-space: nowrap;\r\n\t\t/* #endif */\r\n\t\t/* #ifdef APP-PLUS */\r\n\t\ttext-overflow: ellipsis;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t.first-row-right {\r\n\t\twidth: 400rpx;\r\n\t\theight: 100rpx;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t}\r\n\t.first-row-more-box{\r\n\t\twidth: 80rpx;\r\n\t\theight:60rpx ;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t.first-row-right-more {\r\n\t\twidth: 60rpx;\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\r\n\t.master {\r\n\t\twidth: 750rpx;\r\n\t\theight: 194rpx;\r\n\t\tposition: fixed;\r\n\t\ttop: 180rpx;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.sort-btn {\r\n\t\twidth: 224rpx;\r\n\t\theight: 60rpx;\r\n\t\tbackground-color: rgba(255,255,255,0.21);\r\n\t\tborder-radius: 30rpx;\r\n\t\tposition: fixed;\r\n\t\ttop: 180rpx;\r\n\t\tright: 24rpx;\r\n\t\tjustify-content: center;\r\n\t\talign-items: flex-end;\r\n\t}\r\n\t.sort-btn-text{\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 28rpx;\r\n\t\tline-height: 60rpx;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\t.seat-box{\r\n\t\twidth: 750rpx;\r\n\t\tpadding: 0 50rpx;\r\n\t\theight: 450rpx;\r\n\t\tposition: fixed;\r\n\t\ttop: 400rpx;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: wrap;\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\t.seat-box-block{\r\n\t\twidth: 160rpx;\r\n\t\theight: 225rpx;\r\n\t\talign-items: center;\r\n\t}\r\n</style>\n","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608968587314\n      var cssReload = require(\"C:/Users/admin/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=style&index=1&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608968587357\n      var cssReload = require(\"C:/Users/admin/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}